<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>基礎編：自動テスト実行 - CI/CDハンズオン</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🚀</text></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-gray-50">
    <!-- ナビゲーション -->
    <nav class="bg-gradient-to-r from-blue-600 to-indigo-700 text-white shadow-lg fixed w-full top-0 z-50">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <h1 class="text-2xl font-bold">CI/CD ハンズオン - 基礎編</h1>
                <div class="hidden md:flex space-x-4 text-sm items-center">
                    <a href="cicd-index.html" class="hover:text-blue-200">理論編</a>
                    <span class="text-blue-200">|</span>
                    <a href="cicd-handson-basic.html" class="hover:text-blue-200">基礎：自動テスト</a>
                    <a href="cicd-handson-quality.html" class="hover:text-blue-200">応用：品質チェック</a>
                    <a href="cicd-handson-deploy.html" class="hover:text-blue-200">実践：自動デプロイ</a>
                    <span class="text-blue-200">|</span>
                    <a href="index.html" class="hover:text-blue-200">TDD</a>
                </div>
                <button id="menuBtn" class="md:hidden">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
            </div>
        </div>
    </nav>

    <!-- モバイルメニュー -->
    <div id="mobileMenu" class="hidden bg-blue-600 text-white fixed w-full top-16 z-40 md:hidden shadow-lg">
        <div class="container mx-auto px-6 py-4 space-y-3">
            <a href="cicd-index.html" class="block hover:text-blue-200">理論編</a>
            <a href="cicd-handson-basic.html" class="block hover:text-blue-200">基礎：自動テスト</a>
            <a href="cicd-handson-quality.html" class="block hover:text-blue-200">応用：品質チェック</a>
            <a href="cicd-handson-deploy.html" class="block hover:text-blue-200">実践：自動デプロイ</a>
        </div>
    </div>

    <div class="pt-20">
        <!-- ヒーローセクション -->
        <section class="bg-gradient-to-r from-blue-600 to-indigo-700 text-white py-20">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-5xl font-bold mb-6">基礎編：自動テスト実行</h2>
                <p class="text-2xl mb-4">GitHub Actionsでテストを自動化しよう</p>
            </div>
        </section>

        <!-- イントロ -->
        <section class="py-16 bg-white">
            <div class="container mx-auto px-6">
                <div class="max-w-4xl mx-auto">
                    <h2 class="text-4xl font-bold text-gray-800 mb-8 text-center">何を作るか？</h2>

                    <div class="bg-green-50 p-8 rounded-lg shadow-lg mb-8">
                        <h3 class="text-2xl font-bold text-green-800 mb-4">🎯 目標</h3>
                        <p class="text-gray-700 text-lg mb-6">
                            コードをGitHubにプッシュしたら、<br>
                            <span class="bg-yellow-200 px-2 py-1 rounded">自動的にPHPUnitが実行される</span>ようにします。
                        </p>
                        <div class="bg-white p-6 rounded-lg border-l-4 border-green-600">
                            <h4 class="font-bold text-gray-800 mb-3">実現すること</h4>
                            <ul class="space-y-2 text-gray-700">
                                <li>• コードをプッシュすると自動でテストが実行される</li>
                                <li>• GitHub上でテスト結果が見える</li>
                                <li>• テストが失敗したらすぐに通知される</li>
                                <li>• チーム全員のコードが常にテストされる</li>
                            </ul>
                        </div>
                    </div>

                    <div class="bg-yellow-50 p-6 rounded-lg border-l-4 border-yellow-500">
                        <p class="font-bold text-yellow-800 mb-3">💡 前提条件</p>
                        <ul class="text-gray-700 space-y-2">
                            <li>• TDDハンズオンでTodoアプリを作成済み</li>
                            <li>• GitHubアカウントを持っている</li>
                            <li>• Gitの基本操作ができる</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- ステップ1: GitHubリポジトリ作成 -->
        <section id="create-repo" class="py-16 bg-blue-50">
            <div class="container mx-auto px-6">
                <div class="max-w-5xl mx-auto">
                    <div class="text-center mb-12">
                        <h2 class="text-4xl font-bold text-gray-800 mb-4">ステップ1：GitHubリポジトリ作成</h2>
                        <p class="text-xl text-gray-600">コードをGitHubにアップロードする</p>
                    </div>

                    <div class="bg-white p-8 rounded-lg shadow-lg mb-8">
                        <h3 class="text-2xl font-bold text-gray-800 mb-6">📁 新しいリポジトリを作成</h3>

                        <ol class="space-y-6">
                            <li class="border-l-4 border-green-500 pl-6">
                                <h4 class="font-bold text-gray-800 mb-2">1. GitHubで新規リポジトリ作成</h4>
                                <p class="text-gray-700 mb-3">
                                    GitHub (<a href="https://github.com" target="_blank" class="text-blue-600 hover:underline">https://github.com</a>) にアクセスし、右上の「+」→「New repository」をクリック
                                </p>
                                <div class="bg-gray-100 p-4 rounded">
                                    <p class="text-sm text-gray-700"><strong>リポジトリ名:</strong> laravel-tdd-cicd（または任意の名前）</p>
                                    <p class="text-sm text-gray-700"><strong>公開設定:</strong> Public（無料プランでActions使用可能）</p>
                                    <p class="text-sm text-gray-700"><strong>README:</strong> チェックなし（既存プロジェクトなので）</p>
                                </div>
                            </li>

                            <li class="border-l-4 border-blue-500 pl-6">
                                <h4 class="font-bold text-gray-800 mb-2">2. ローカルリポジトリと連携</h4>
                                <p class="text-gray-700 mb-3">
                                    Laravelプロジェクトのディレクトリで以下のコマンドを実行:
                                </p>
                                <div class="bg-gray-900 text-green-400 p-4 rounded-lg font-mono text-sm mb-3">
<pre class="text-white"><span class="text-gray-500"># まだGit管理していない場合</span>
git init

<span class="text-gray-500"># リモートリポジトリを追加（URLは自分のものに置き換える）</span>
git remote add origin https://github.com/YOUR_USERNAME/laravel-tdd-cicd.git

<span class="text-gray-500"># 現在のブランチ名をmainに変更</span>
git branch -M main</pre>
                                </div>
                            </li>

                            <li class="border-l-4 border-yellow-500 pl-6">
                                <h4 class="font-bold text-gray-800 mb-2">3. 最初のコミット&プッシュ</h4>
                                <div class="bg-gray-900 text-green-400 p-4 rounded-lg font-mono text-sm">
<pre class="text-white"><span class="text-gray-500"># 全てのファイルをステージング</span>
git add .

<span class="text-gray-500"># コミット</span>
git commit -m "Initial commit with TDD Todo app"

<span class="text-gray-500"># GitHubにプッシュ</span>
git push -u origin main</pre>
                                </div>
                            </li>
                        </ol>

                        <div class="mt-6 bg-green-50 p-4 rounded-lg border-l-4 border-green-500">
                            <p class="text-gray-700 text-sm">
                                <strong>✅ 確認:</strong> GitHubのリポジトリページをブラウザで開き、コードがアップロードされていることを確認してください。
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ステップ2: ワークフローファイル作成 -->
        <section id="create-workflow" class="py-16 bg-white">
            <div class="container mx-auto px-6">
                <div class="max-w-5xl mx-auto">
                    <div class="text-center mb-12">
                        <h2 class="text-4xl font-bold text-gray-800 mb-4">ステップ2：ワークフローファイル作成</h2>
                        <p class="text-xl text-gray-600">GitHub Actionsの設定を書く</p>
                    </div>

                    <div class="bg-white p-8 rounded-lg shadow-lg mb-8">
                        <h3 class="text-2xl font-bold text-gray-800 mb-6">📝 test.ymlを作成</h3>

                        <p class="text-gray-700 mb-6 text-lg">
                            <strong>Gitリポジトリのルート</strong>（<code class="bg-gray-100 px-2 py-1 rounded">.git</code>ディレクトリがある場所）に以下のディレクトリ構造を作成します:
                        </p>

                        <div class="bg-gray-100 p-4 rounded-lg mb-6 font-mono text-sm">
<pre>リポジトリルート/    ← .gitディレクトリがある場所
├── .git/           ← Gitの管理ディレクトリ
├── .github/        ← ここを作る
│   └── workflows/
│       └── test.yml  ← これを作る
├── src/            ← Laravelのソースコード（プロジェクトによる）
│   ├── app/
│   ├── tests/
│   └── ...
└── docker-compose.yml</pre>
                        </div>

                        <div class="bg-yellow-50 p-4 rounded-lg border-l-4 border-yellow-500 mb-6">
                            <p class="text-sm text-gray-800">
                                <strong>⚠️ 注意:</strong> <code class="bg-gray-100 px-1 rounded">.github</code>ディレクトリは、Laravelプロジェクト（<code class="bg-gray-100 px-1 rounded">app</code>や<code class="bg-gray-100 px-1 rounded">tests</code>がある場所）ではなく、
                                <strong>Gitリポジトリのルート</strong>（<code class="bg-gray-100 px-1 rounded">.git</code>ディレクトリと同じ階層）に配置してください。
                            </p>
                        </div>

                        <p class="text-gray-700 mb-4">
                            <code class="bg-gray-100 px-2 py-1 rounded">.github/workflows/test.yml</code> を作成し、以下の内容を記述します:
                        </p>

                        <div class="bg-gray-900 text-green-400 p-6 rounded-lg font-mono text-sm mb-6">
<pre class="text-white"><span class="text-gray-500"># .github/workflows/test.yml</span>
<span class="text-yellow-300">name:</span> <span class="text-green-300">Run Tests</span>

<span class="text-gray-500"># いつ実行するか</span>
<span class="text-yellow-300">on:</span>
  <span class="text-yellow-300">push:</span>
    <span class="text-yellow-300">branches:</span> [ main, master, develop ]
  <span class="text-yellow-300">pull_request:</span>
    <span class="text-yellow-300">branches:</span> [ main, master, develop ]

<span class="text-gray-500"># 実行する処理</span>
<span class="text-yellow-300">jobs:</span>
  <span class="text-yellow-300">test:</span>
    <span class="text-yellow-300">runs-on:</span> ubuntu-latest

    <span class="text-yellow-300">steps:</span>
    <span class="text-gray-500"># 1. コードをチェックアウト</span>
    - <span class="text-yellow-300">name:</span> <span class="text-green-300">Checkout code</span>
      <span class="text-yellow-300">uses:</span> actions/checkout@v3

    <span class="text-gray-500"># 2. PHPをセットアップ</span>
    - <span class="text-yellow-300">name:</span> <span class="text-green-300">Setup PHP</span>
      <span class="text-yellow-300">uses:</span> shivammathur/setup-php@v2
      <span class="text-yellow-300">with:</span>
        <span class="text-yellow-300">php-version:</span> <span class="text-green-300">'8.2'</span>
        <span class="text-yellow-300">extensions:</span> mbstring, pdo, pdo_sqlite
        <span class="text-yellow-300">coverage:</span> none

    <span class="text-gray-500"># 3. Composerの依存関係をインストール</span>
    - <span class="text-yellow-300">name:</span> <span class="text-green-300">Install dependencies</span>
      <span class="text-yellow-300">working-directory:</span> src
      <span class="text-yellow-300">run:</span> composer install --prefer-dist --no-progress

    <span class="text-gray-500"># 4. .envファイルをコピー</span>
    - <span class="text-yellow-300">name:</span> <span class="text-green-300">Copy .env</span>
      <span class="text-yellow-300">working-directory:</span> src
      <span class="text-yellow-300">run:</span> cp .env.example .env

    <span class="text-gray-500"># 5. アプリケーションキーを生成</span>
    - <span class="text-yellow-300">name:</span> <span class="text-green-300">Generate app key</span>
      <span class="text-yellow-300">working-directory:</span> src
      <span class="text-yellow-300">run:</span> php artisan key:generate

    <span class="text-gray-500"># 6. ディレクトリ権限を設定</span>
    - <span class="text-yellow-300">name:</span> <span class="text-green-300">Set directory permissions</span>
      <span class="text-yellow-300">working-directory:</span> src
      <span class="text-yellow-300">run:</span> chmod -R <span class="text-green-300">777</span> storage bootstrap/cache

    <span class="text-gray-500"># 7. テストを実行</span>
    - <span class="text-yellow-300">name:</span> <span class="text-green-300">Run tests</span>
      <span class="text-yellow-300">working-directory:</span> src
      <span class="text-yellow-300">run:</span> php artisan test</pre>
                        </div>

                        <div class="bg-blue-50 p-6 rounded-lg border-l-4 border-blue-500">
                            <p class="font-bold text-blue-800 mb-4">📖 設定の解説:</p>
                            <div class="space-y-3 text-gray-700 text-sm">
                                <div>
                                    <p class="font-bold">on: push / pull_request</p>
                                    <p>main、master、developブランチへのpush、またはプルリクエスト作成時に実行</p>
                                </div>
                                <div>
                                    <p class="font-bold">runs-on: ubuntu-latest</p>
                                    <p>Ubuntu最新版の仮想環境で実行</p>
                                </div>
                                <div>
                                    <p class="font-bold">actions/checkout@v3</p>
                                    <p>GitHubからコードをダウンロード</p>
                                </div>
                                <div>
                                    <p class="font-bold">shivammathur/setup-php@v2</p>
                                    <p>PHPと必要な拡張機能をインストール</p>
                                </div>
                                <div>
                                    <p class="font-bold">working-directory: src</p>
                                    <p>Laravelプロジェクトが<code class="bg-gray-100 px-1 rounded">src</code>ディレクトリ内にある場合に指定（プロジェクトがルートにある場合は不要）</p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-yellow-50 p-4 rounded-lg border-l-4 border-yellow-500 mt-6">
                            <p class="text-sm text-gray-800">
                                <strong>💡 プロジェクト構造について:</strong><br>
                                上記の例は、Laravelプロジェクトが<code class="bg-gray-100 px-1 rounded">src</code>ディレクトリ内にある構造を想定しています。
                                もしLaravelプロジェクトがリポジトリのルートに直接ある場合（<code class="bg-gray-100 px-1 rounded">composer.json</code>がルートにある場合）は、
                                <code class="bg-gray-100 px-1 rounded">working-directory: src</code>の行を削除してください。
                            </p>
                        </div>
                    </div>

                    <!-- phpunit.xmlの設定 -->
                    <div class="bg-white p-8 rounded-lg shadow-lg mb-8">
                        <h3 class="text-2xl font-bold text-gray-800 mb-6">📝 phpunit.xml の設定確認</h3>
                        <p class="text-gray-700 mb-4">
                            CI環境ではMySQLが使えないため、<code class="bg-gray-100 px-2 py-1 rounded">phpunit.xml</code>でSQLiteを使うよう設定します。<br>
                            以下の設定が有効になっていることを確認してください。
                        </p>

                        <div class="bg-gray-900 text-green-400 p-6 rounded-lg font-mono text-sm mb-6">
<pre class="text-white"><span class="text-gray-500">&lt;!-- phpunit.xml --&gt;</span>
<span class="text-purple-400">&lt;php&gt;</span>
    <span class="text-blue-300">&lt;env</span> <span class="text-yellow-300">name=</span><span class="text-green-300">"DB_CONNECTION"</span> <span class="text-yellow-300">value=</span><span class="text-green-300">"sqlite"</span> <span class="text-yellow-300">force=</span><span class="text-green-300">"true"</span><span class="text-blue-300">/&gt;</span>
    <span class="text-blue-300">&lt;env</span> <span class="text-yellow-300">name=</span><span class="text-green-300">"DB_DATABASE"</span> <span class="text-yellow-300">value=</span><span class="text-green-300">":memory:"</span> <span class="text-yellow-300">force=</span><span class="text-green-300">"true"</span><span class="text-blue-300">/&gt;</span>
<span class="text-purple-400">&lt;/php&gt;</span></pre>
                        </div>

                        <div class="bg-blue-50 p-6 rounded-lg border-l-4 border-blue-500">
                            <p class="font-bold text-blue-800 mb-3">📖 設定の意味：</p>
                            <ul class="space-y-2 text-gray-700 text-sm">
                                <li><strong>DB_CONNECTION="sqlite"</strong> - SQLiteを使用（CI環境で利用可能）</li>
                                <li><strong>DB_DATABASE=":memory:"</strong> - メモリ上にDBを作成（高速・テスト後に自動削除）</li>
                                <li><strong>force="true"</strong> - .envの設定を上書きしてこの値を使用</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ステップ3: プッシュして動作確認 -->
        <section id="test-workflow" class="py-16 bg-green-50">
            <div class="container mx-auto px-6">
                <div class="max-w-5xl mx-auto">
                    <div class="text-center mb-12">
                        <h2 class="text-4xl font-bold text-gray-800 mb-4">ステップ3：プッシュして動作確認</h2>
                        <p class="text-xl text-gray-600">実際にCIを動かしてみる</p>
                    </div>

                    <div class="bg-white p-8 rounded-lg shadow-lg mb-8">
                        <h3 class="text-2xl font-bold text-gray-800 mb-6">🚀 ワークフローを実行</h3>

                        <ol class="space-y-6">
                            <li class="border-l-4 border-green-500 pl-6">
                                <h4 class="font-bold text-gray-800 mb-2">1. 作成したファイルをコミット&プッシュ</h4>
                                <div class="bg-gray-900 text-green-400 p-4 rounded-lg font-mono text-sm">
<pre class="text-white">git add .github/workflows/test.yml
git commit -m "Add GitHub Actions workflow for testing"
git push</pre>
                                </div>
                            </li>

                            <li class="border-l-4 border-blue-500 pl-6">
                                <h4 class="font-bold text-gray-800 mb-2">2. GitHubでActionsタブを確認</h4>
                                <p class="text-gray-700 mb-3">
                                    GitHubのリポジトリページで「Actions」タブをクリックします。
                                </p>
                                <div class="bg-gray-100 p-4 rounded">
                                    <p class="text-sm text-gray-700">「Run Tests」というワークフローが実行中になっているはずです。</p>
                                    <p class="text-sm text-gray-700">🟡 黄色（実行中） → 🟢 緑（成功） または 🔴 赤（失敗）</p>
                                </div>
                            </li>

                            <li class="border-l-4 border-yellow-500 pl-6">
                                <h4 class="font-bold text-gray-800 mb-2">3. 実行ログを確認</h4>
                                <p class="text-gray-700 mb-3">
                                    ワークフロー名をクリックすると、詳細なログが見られます。
                                </p>
                                <ul class="space-y-2 text-gray-700 text-sm">
                                    <li>• 各ステップの実行時間</li>
                                    <li>• コマンドの出力結果</li>
                                    <li>• テストの成功/失敗</li>
                                    <li>• エラーメッセージ（失敗時）</li>
                                </ul>
                            </li>
                        </ol>

                        <div class="mt-8 bg-green-50 p-6 rounded-lg border-l-4 border-green-600">
                            <p class="font-bold text-green-800 mb-3">✅ 成功した場合</p>
                            <p class="text-gray-700 mb-3">
                                おめでとうございます！自動テストが動きました🎉<br>
                                これで、コードをプッシュするたびに自動でテストが実行されます。
                            </p>
                        </div>

                        <div class="mt-4 bg-red-50 p-6 rounded-lg border-l-4 border-red-600">
                            <p class="font-bold text-red-800 mb-3">❌ 失敗した場合</p>
                            <p class="text-gray-700 mb-3">
                                ログを確認して、エラーメッセージを読みましょう。<br>
                                よくある原因:
                            </p>
                            <ul class="space-y-2 text-gray-700 text-sm">
                                <li>• PHPのバージョンが合っていない</li>
                                <li>• 必要な拡張機能がインストールされていない</li>
                                <li>• テストコード自体にバグがある</li>
                                <li>• .envの設定が不足している</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 応用：バッジを追加 -->
        <section id="add-badge" class="py-16 bg-white">
            <div class="container mx-auto px-6">
                <div class="max-w-5xl mx-auto">
                    <div class="text-center mb-12">
                        <h2 class="text-4xl font-bold text-gray-800 mb-4">応用：ステータスバッジを追加</h2>
                        <p class="text-xl text-gray-600">READMEにテスト結果を表示する</p>
                    </div>

                    <div class="bg-white p-8 rounded-lg shadow-lg mb-8">
                        <h3 class="text-2xl font-bold text-gray-800 mb-6">🏅 バッジで見える化</h3>

                        <p class="text-gray-700 mb-6">
                            GitHubのステータスバッジをREADMEに追加すると、一目でテスト状態が分かります。<br>
                            オープンソースプロジェクトでよく使われる機能です。
                        </p>

                        <div class="bg-gray-100 p-4 rounded-lg mb-6">
                            <p class="text-gray-700 mb-2 font-bold">バッジの表示例:</p>
                            <p class="text-sm text-gray-700">🟢 <span class="bg-green-100 px-3 py-1 rounded font-mono text-green-800">passing</span> （テストが成功している場合）</p>
                            <p class="text-sm text-gray-700 mt-2">🔴 <span class="bg-red-100 px-3 py-1 rounded font-mono text-red-800">failing</span> （テストが失敗している場合）</p>
                        </div>

                        <p class="text-gray-700 mb-4">
                            <code class="bg-gray-100 px-2 py-1 rounded">README.md</code> の先頭に以下を追加:
                        </p>

                        <div class="bg-gray-900 text-green-400 p-4 rounded-lg font-mono text-sm mb-6">
<pre class="text-white"><span class="text-gray-500"># Laravel TDD CICD</span>

![Run Tests](https://github.com/YOUR_USERNAME/YOUR_REPO/workflows/Run%20Tests/badge.svg)

<span class="text-gray-500">## 概要</span>
TDDで開発したTodoアプリです。
CI/CDでテストを自動化しています。</pre>
                        </div>

                        <div class="bg-blue-50 p-4 rounded-lg border-l-4 border-blue-500">
                            <p class="text-sm text-gray-700">
                                <strong>💡 ポイント:</strong> <code>YOUR_USERNAME</code>と<code>YOUR_REPO</code>を自分のものに置き換えてください。
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 重要：ブランチ保護ルール -->
        <section id="branch-protection" class="py-16 bg-blue-50">
            <div class="container mx-auto px-6">
                <div class="max-w-5xl mx-auto">
                    <div class="text-center mb-12">
                        <h2 class="text-4xl font-bold text-gray-800 mb-4">重要：テスト失敗時にマージを防ぐ</h2>
                        <p class="text-xl text-gray-600">ブランチ保護ルールでコード品質を守る</p>
                    </div>

                    <div class="bg-yellow-50 p-8 rounded-lg shadow-lg mb-8 border-l-4 border-yellow-500">
                        <h3 class="text-2xl font-bold text-yellow-800 mb-4">⚠️ 現状の問題</h3>
                        <p class="text-gray-700 text-lg mb-4">
                            今のままでは、<span class="bg-yellow-200 px-2 py-1 rounded">テストが失敗してもpushできてしまいます。</span>
                        </p>
                        <p class="text-gray-700">
                            GitHub Actionsはリモートで実行されるだけなので、ローカルからのpushを止めることはできません。<br>
                            これを防ぐために、<strong>プルリクエスト + ブランチ保護ルール</strong>を使います。
                        </p>
                    </div>

                    <div class="bg-white p-8 rounded-lg shadow-lg mb-8">
                        <h3 class="text-2xl font-bold text-gray-800 mb-6">🛡️ ブランチ保護ルールとは</h3>

                        <div class="bg-green-50 p-6 rounded-lg mb-6 border-l-4 border-green-500">
                            <p class="font-bold text-green-800 mb-2">✅ プルリクエスト + ブランチ保護ルールが圧倒的に一般的です。</p>
                            <p class="text-gray-700 text-sm">
                                チーム開発の標準手法として、世界中の開発チームで使われています。
                            </p>
                        </div>

                        <p class="text-gray-700 mb-6">
                            <strong>ブランチ保護ルール</strong>は、mainブランチに直接pushするのではなく、<br>
                            必ず<span class="bg-blue-100 px-2 py-1 rounded">プルリクエスト（PR）</span>を経由してマージする仕組みです。
                        </p>

                        <div class="bg-gray-100 p-6 rounded-lg mb-6">
                            <h4 class="font-bold text-gray-800 mb-3">スクラム開発での位置づけ</h4>
                            <p class="text-gray-700 mb-3">
                                プルリクエストは、スクラムの<strong>「完成の定義（Definition of Done）」</strong>を技術的に保証する仕組みです。
                            </p>
                            <ul class="space-y-2 text-gray-700 text-sm">
                                <li>✓ コードレビューが承認されている</li>
                                <li>✓ すべてのテストがパスしている（CI）</li>
                                <li>✓ コード品質基準を満たしている</li>
                                <li>✓ チーム全員が変更内容を把握できる（透明性）</li>
                            </ul>
                        </div>

                        <h4 class="text-xl font-bold text-gray-800 mb-4 mt-8">📋 設定手順</h4>

                        <ol class="space-y-6">
                            <li class="border-l-4 border-blue-500 pl-6">
                                <h5 class="font-bold text-gray-800 mb-2">1. GitHubでブランチ保護ルールを設定</h5>
                                <div class="bg-gray-50 p-4 rounded">
                                    <ol class="space-y-2 text-gray-700 text-sm list-decimal list-inside">
                                        <li>GitHubのリポジトリページで「Settings」タブをクリック</li>
                                        <li>左メニューから「Code and automation」→「Rules」→「Rulesets」を選択</li>
                                        <li>「Add branch ruleset」ボタンをクリック（緑色のボタン）</li>
                                        <li>「Ruleset Name」に任意の名前（例：<code class="bg-gray-100 px-2 py-1 rounded">Protect production branches</code>）を入力</li>
                                        <li>「Enforcement status」を<strong>Active</strong>に設定</li>
                                        <li>「Target branches」で「Add target」をクリックし、「Include by pattern」を選択</li>
                                        <li>ブランチ名に<code class="bg-gray-100 px-2 py-1 rounded">main</code>と入力して追加
                                            <div class="bg-blue-50 p-3 rounded mt-2 border-l-2 border-blue-400">
                                                <p class="text-xs text-gray-800">
                                                    <strong>💡 ヒント:</strong> プロジェクトによって本番ブランチ名（<code class="bg-gray-100 px-1 rounded">main</code>、<code class="bg-gray-100 px-1 rounded">master</code>、<code class="bg-gray-100 px-1 rounded">production</code>など）が異なります。<br>
                                                    自分のプロジェクトのブランチ名を確認してください。
                                                </p>
                                            </div>
                                        </li>
                                        <li>「Branch rules」セクションで以下をチェック：
                                            <ul class="ml-6 mt-2 space-y-1">
                                                <li>☑ <strong>Require a pull request before merging</strong></li>
                                                <li>☑ <strong>Require status checks to pass</strong></li>
                                                <li class="ml-4">→ 「Add checks」をクリックし、「test」と検索して「Run Tests」を選択</li>
                                            </ul>
                                        </li>
                                        <li>ページ下部の「Create」ボタンをクリック</li>
                                    </ol>
                                </div>
                            </li>

                            <li class="border-l-4 border-green-500 pl-6">
                                <h5 class="font-bold text-gray-800 mb-2">2. 今後の開発フロー</h5>
                                <div class="bg-gray-900 text-green-400 p-4 rounded-lg font-mono text-sm">
<pre class="text-white"><span class="text-gray-500"># 1. 新しいブランチを作成</span>
git checkout -b feature/new-feature

<span class="text-gray-500"># 2. TDDで機能開発</span>
<span class="text-gray-500"># ... コードを書く ...</span>

<span class="text-gray-500"># 3. コミット&プッシュ</span>
git add .
git commit -m "Add new feature"
git push origin feature/new-feature

<span class="text-gray-500"># 4. GitHubでプルリクエストを作成</span>
<span class="text-gray-500"># ブラウザでGitHubを開き「Compare & pull request」ボタンをクリック</span></pre>
                                </div>
                            </li>

                            <li class="border-l-4 border-yellow-500 pl-6">
                                <h5 class="font-bold text-gray-800 mb-2">3. プルリクエストでの確認事項</h5>
                                <p class="text-gray-700 mb-3">
                                    PRを作成すると、自動的に以下が実行されます：
                                </p>
                                <ul class="space-y-2 text-gray-700 text-sm">
                                    <li>🟡 GitHub Actionsでテストが実行される</li>
                                    <li>🟢 テストが成功 → 「Merge pull request」ボタンが有効になる</li>
                                    <li>🔴 テストが失敗 → マージできない（修正が必要）</li>
                                </ul>

                                <div class="bg-green-50 p-4 rounded mt-4 border-l-4 border-green-500">
                                    <p class="text-sm text-gray-800">
                                        <strong>✅ これで、テストが通らないコードはmainブランチに入らなくなります！</strong>
                                    </p>
                                </div>
                            </li>
                        </ol>
                    </div>

                    <div class="bg-white p-8 rounded-lg shadow-lg">
                        <h3 class="text-2xl font-bold text-gray-800 mb-6">💡 他の方法との比較</h3>

                        <div class="overflow-x-auto">
                            <table class="w-full text-sm">
                                <thead>
                                    <tr class="bg-gray-100">
                                        <th class="p-3 text-left font-bold text-gray-800">方法</th>
                                        <th class="p-3 text-left font-bold text-gray-800">使用頻度</th>
                                        <th class="p-3 text-left font-bold text-gray-800">メリット</th>
                                        <th class="p-3 text-left font-bold text-gray-800">デメリット</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="border-b">
                                        <td class="p-3 font-bold text-green-700">PR + ブランチ保護</td>
                                        <td class="p-3"><span class="bg-green-100 px-2 py-1 rounded text-green-800">⭐⭐⭐ 非常に一般的</span></td>
                                        <td class="p-3 text-gray-700">
                                            • チーム全体で強制可能<br>
                                            • コードレビュー文化が育つ<br>
                                            • GitHubの標準機能<br>
                                            • 変更履歴が明確
                                        </td>
                                        <td class="p-3 text-gray-700">
                                            • PRの手間が増える<br>
                                            • 小規模な変更も同じ手順
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="p-3 font-bold text-gray-700">Git Hooks (pre-push)</td>
                                        <td class="p-3"><span class="bg-gray-100 px-2 py-1 rounded text-gray-600">⭐ 補助的に使用</span></td>
                                        <td class="p-3 text-gray-700">
                                            • ローカルで即座にチェック<br>
                                            • 個人開発に便利
                                        </td>
                                        <td class="p-3 text-gray-700">
                                            • 簡単にスキップ可能<br>
                                            • チーム全体への適用が困難<br>
                                            • 各自がセットアップ必要
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="mt-6 bg-blue-50 p-4 rounded border-l-4 border-blue-500">
                            <p class="text-sm text-gray-800">
                                <strong>推奨：</strong> スクラム開発では、<strong>PR + ブランチ保護ルール</strong>を必ず設定しましょう。<br>
                                これにより、スプリント内でのコード品質が保たれ、技術的負債の蓄積を防ぐことができます。
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- まとめ -->
        <section class="py-16 bg-white">
            <div class="container mx-auto px-6">
                <div class="max-w-4xl mx-auto">
                    <h2 class="text-4xl font-bold text-gray-800 mb-8 text-center">🎓 基礎編のまとめ</h2>

                    <div class="bg-gradient-to-br from-blue-50 via-indigo-50 to-blue-100 p-8 rounded-lg shadow-lg mb-8">
                        <h3 class="text-2xl font-bold text-gray-800 mb-6">学んだこと</h3>

                        <div class="space-y-4">
                            <div class="bg-green-50 p-6 rounded-lg">
                                <h4 class="text-xl font-bold text-green-600 mb-4">✓ 実現できたこと</h4>
                                <ul class="space-y-2 text-gray-700">
                                    <li>• GitHubリポジトリの作成</li>
                                    <li>• GitHub Actionsのワークフロー作成</li>
                                    <li>• プッシュ時の自動テスト実行</li>
                                    <li>• テスト結果の確認</li>
                                    <li>• ステータスバッジの追加</li>
                                </ul>
                            </div>

                            <div class="bg-blue-50 p-6 rounded-lg">
                                <h4 class="text-xl font-bold text-blue-600 mb-4">✓ 今後の開発フロー</h4>
                                <ol class="space-y-2 text-gray-700 list-decimal list-inside">
                                    <li>ローカルでTDDで機能開発</li>
                                    <li>GitHubにプッシュ</li>
                                    <li><strong>自動でテストが実行される</strong>（NEW!）</li>
                                    <li>テストが通ればマージ</li>
                                </ol>
                            </div>
                        </div>
                    </div>

                    <div class="text-center">
                        <h3 class="text-2xl font-bold text-gray-800 mb-6">次のステップ</h3>
                        <p class="text-gray-600 mb-8 text-lg">
                            自動テスト実行を学びました。<br>
                            次は<strong>コード品質チェック</strong>を追加します。
                        </p>

                        <a href="cicd-handson-quality.html" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-full inline-block transition text-lg">
                            応用編へ進む →
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <!-- フッター -->
        <footer class="bg-gradient-to-r from-gray-800 to-gray-900 text-white py-12 mt-16">
            <div class="container mx-auto px-4">
                <div class="text-center">
                    <p class="text-gray-300 text-sm">
                        &copy; <span id="currentYear"></span> アジャイル ビジネス インスティテュート株式会社
                    </p>
                </div>
            </div>
        </footer>

        <script>
            // 現在の年を自動挿入
            document.getElementById('currentYear').textContent = new Date().getFullYear();
        </script>
    </div>

    <script src="script.js"></script>
    <script src="code-copy.js"></script>
    <script src="global-menu.js"></script>
    <script src="nav-highlight.js"></script>
    <script src="scroll-to-top.js"></script>
</body>
</html>
