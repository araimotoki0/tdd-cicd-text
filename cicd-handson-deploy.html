<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®Ÿè·µç·¨ï¼šè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ - CI/CDå®Ÿè·µãƒãƒ³ã‚ºã‚ªãƒ³</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-gray-50">
    <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ -->
    <nav class="bg-gradient-to-r from-blue-600 to-indigo-700 text-white shadow-lg fixed w-full top-0 z-50">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center py-4">
                <div class="text-2xl font-bold">CI/CDå®Ÿè·µè¬›åº§</div>
                <div class="hidden md:flex space-x-4 text-sm items-center">
                    <a href="cicd-index.html" class="hover:text-blue-200">ç†è«–ç·¨</a>
                    <span class="text-blue-200">|</span>
                    <a href="cicd-handson-basic.html" class="hover:text-blue-200">åŸºç¤ï¼šè‡ªå‹•ãƒ†ã‚¹ãƒˆ</a>
                    <a href="cicd-handson-quality.html" class="hover:text-blue-200">å¿œç”¨ï¼šå“è³ªãƒã‚§ãƒƒã‚¯</a>
                    <a href="cicd-handson-deploy.html" class="hover:text-blue-200 font-semibold">å®Ÿè·µï¼šè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤</a>
                    <span class="text-blue-200">|</span>
                    <a href="index.html" class="hover:text-blue-200">TDD</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <div class="pt-20">
        <!-- ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="bg-gradient-to-r from-blue-600 to-indigo-700 text-white py-20">
            <div class="container mx-auto px-6 text-center">
                <h2 class="text-5xl font-bold mb-6">å®Ÿè·µç·¨ï¼šEC2ã¸ã®è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤</h2>
                <p class="text-2xl mb-4">GitHub Actionsã§AWS EC2ã¸è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’å®Ÿç¾ã—ã¾ã—ã‚‡ã†</p>
            </div>
        </section>

        <!-- ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
        <div class="container mx-auto px-4 py-12 max-w-4xl">

            <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³1: ãƒ‡ãƒ—ãƒ­ã‚¤ã®æµã‚Œ -->
            <section class="mb-12 bg-white rounded-lg shadow-md p-8">
                <h2 class="text-3xl font-bold mb-6 text-blue-600">ğŸ“‹ ãƒ‡ãƒ—ãƒ­ã‚¤ã®å…¨ä½“åƒ</h2>

                <div class="prose max-w-none">
                    <p class="text-lg mb-4">
                        ã“ã®ç« ã§ã¯ã€GitHubã«ãƒ—ãƒƒã‚·ãƒ¥ã™ã‚‹ã¨è‡ªå‹•çš„ã«EC2ã‚µãƒ¼ãƒãƒ¼ã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã‚‹ä»•çµ„ã¿ã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚
                    </p>

                    <div class="bg-blue-50 border-l-4 border-blue-600 p-4 mb-6">
                        <h3 class="font-bold text-lg mb-2">ğŸ”„ ãƒ‡ãƒ—ãƒ­ã‚¤ã®æµã‚Œ</h3>
                        <ol class="list-decimal ml-6 space-y-2">
                            <li>é–‹ç™ºè€…ãŒã‚³ãƒ¼ãƒ‰ã‚’GitHubã«ãƒ—ãƒƒã‚·ãƒ¥</li>
                            <li>GitHub ActionsãŒè‡ªå‹•çš„ã«èµ·å‹•</li>
                            <li>ãƒ†ã‚¹ãƒˆã¨å“è³ªãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œ</li>
                            <li>ã™ã¹ã¦æˆåŠŸã—ãŸã‚‰EC2ã«SSHæ¥ç¶š</li>
                            <li>EC2ä¸Šã§ã‚³ãƒ¼ãƒ‰ã‚’æ›´æ–°ã—ã¦å†èµ·å‹•</li>
                        </ol>
                    </div>

                    <div class="bg-yellow-50 border-l-4 border-yellow-600 p-4 mb-6">
                        <h4 class="font-bold mb-2">âš ï¸ å‰ææ¡ä»¶</h4>
                        <p class="text-sm mb-2">ã“ã®æ¼”ç¿’ã‚’é€²ã‚ã‚‹ã«ã¯ã€ä»¥ä¸‹ãŒå¿…è¦ã§ã™ï¼š</p>
                        <ul class="list-disc ml-6 text-sm space-y-1">
                            <li>ç¨¼åƒä¸­ã®EC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ï¼ˆUbuntuæ¨å¥¨ï¼‰</li>
                            <li>EC2ã«SSHã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚­ãƒ¼ãƒšã‚¢</li>
                            <li>EC2ã«PHPã€Composerã€NginxãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿</li>
                            <li>EC2ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚°ãƒ«ãƒ¼ãƒ—ã§ãƒãƒ¼ãƒˆ80/443ãŒé–‹æ”¾æ¸ˆã¿</li>
                        </ul>
                        <p class="text-sm mt-2">â€» EC2ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †ã¯çœç•¥ã—ã¾ã™</p>
                    </div>
                </div>
            </section>

            <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³2: SSHæ¥ç¶šã®æº–å‚™ -->
            <section class="mb-12 bg-white rounded-lg shadow-md p-8">
                <h2 class="text-3xl font-bold mb-6 text-blue-600">ğŸ” Step 1: SSHæ¥ç¶šã®æº–å‚™</h2>

                <div class="prose max-w-none">
                    <h3 class="text-xl font-bold mb-3">1. ãƒ‡ãƒ—ãƒ­ã‚¤ç”¨SSHã‚­ãƒ¼ã®ç”Ÿæˆ</h3>
                    <p class="mb-4">GitHub Actionså°‚ç”¨ã®SSHã‚­ãƒ¼ãƒšã‚¢ã‚’ä½œæˆã—ã¾ã™ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ã§å®Ÿè¡Œï¼‰ã€‚</p>

                    <div class="code-block-wrapper relative mb-6">
                        <div class="absolute top-2 right-2">
                            <button class="copy-button bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm">
                                ã‚³ãƒ”ãƒ¼
                            </button>
                        </div>
                        <pre class="bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto"><code>ssh-keygen -t ed25519 -C "github-actions-deploy" -f ~/.ssh/github_actions_deploy

# ãƒ‘ã‚¹ãƒ•ãƒ¬ãƒ¼ã‚ºã¯ç©ºã«ã™ã‚‹ï¼ˆEnterã‚’2å›æŠ¼ã™ï¼‰</code></pre>
                    </div>

                    <p class="text-sm text-gray-600 mb-4">2ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œã¾ã™ï¼š</p>
                    <ul class="list-disc ml-6 mb-6 text-sm">
                        <li><code>github_actions_deploy</code> - ç§˜å¯†éµï¼ˆGitHub Secretsã«ä¿å­˜ï¼‰</li>
                        <li><code>github_actions_deploy.pub</code> - å…¬é–‹éµï¼ˆEC2ã«é…ç½®ï¼‰</li>
                    </ul>

                    <h3 class="text-xl font-bold mb-3 mt-6">2. å…¬é–‹éµã‚’EC2ã«é…ç½®</h3>
                    <p class="mb-4">EC2ã«SSHæ¥ç¶šã—ã¦ã€å…¬é–‹éµã‚’ç™»éŒ²ã—ã¾ã™ã€‚</p>

                    <div class="code-block-wrapper relative mb-6">
                        <div class="absolute top-2 right-2">
                            <button class="copy-button bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm">
                                ã‚³ãƒ”ãƒ¼
                            </button>
                        </div>
                        <pre class="bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto"><code># ãƒ­ãƒ¼ã‚«ãƒ«ã‹ã‚‰å…¬é–‹éµã®å†…å®¹ã‚’ã‚³ãƒ”ãƒ¼
cat ~/.ssh/github_actions_deploy.pub

# EC2ã«SSHæ¥ç¶š
ssh -i ~/.ssh/your-ec2-key.pem ubuntu@your-ec2-ip

# EC2ä¸Šã§å…¬é–‹éµã‚’è¿½åŠ 
echo "å…¬é–‹éµã®å†…å®¹ã‚’ã“ã“ã«è²¼ã‚Šä»˜ã‘" >> ~/.ssh/authorized_keys
chmod 600 ~/.ssh/authorized_keys</code></pre>
                    </div>

                    <h3 class="text-xl font-bold mb-3 mt-6">3. GitHub Secretsã«ç§˜å¯†éµã‚’ç™»éŒ²</h3>
                    <p class="mb-4">GitHubãƒªãƒã‚¸ãƒˆãƒªã§ã€ŒSettingsã€â†’ã€ŒSecrets and variablesã€â†’ã€ŒActionsã€ã‚’é–‹ãã¾ã™ã€‚</p>

                    <div class="bg-blue-50 border p-4 rounded-lg mb-4">
                        <p class="font-bold mb-2">ç™»éŒ²ã™ã‚‹Secretsï¼š</p>
                        <ul class="space-y-3 text-sm">
                            <li>
                                <strong>EC2_SSH_KEY</strong><br>
                                <code>cat ~/.ssh/github_actions_deploy</code> ã®å†…å®¹ã‚’ã‚³ãƒ”ãƒ¼ï¼ˆç§˜å¯†éµå…¨ä½“ï¼‰
                            </li>
                            <li>
                                <strong>EC2_HOST</strong><br>
                                EC2ã®ãƒ‘ãƒ–ãƒªãƒƒã‚¯IPã‚¢ãƒ‰ãƒ¬ã‚¹ï¼ˆä¾‹ï¼š<code>54.123.45.67</code>ï¼‰
                            </li>
                            <li>
                                <strong>EC2_USERNAME</strong><br>
                                EC2ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼åï¼ˆUbuntuãªã‚‰ <code>ubuntu</code>ã€Amazon Linuxãªã‚‰ <code>ec2-user</code>ï¼‰
                            </li>
                        </ul>
                    </div>

                    <div class="bg-green-50 border-l-4 border-green-600 p-4 mb-6">
                        <h4 class="font-bold mb-2">âœ… æ¥ç¶šç¢ºèª</h4>
                        <p class="text-sm">ãƒ­ãƒ¼ã‚«ãƒ«ã‹ã‚‰æ–°ã—ã„ã‚­ãƒ¼ã§SSHæ¥ç¶šã§ãã‚‹ã“ã¨ã‚’ç¢ºèªï¼š</p>
                        <div class="code-block-wrapper relative mt-2">
                            <div class="absolute top-2 right-2">
                                <button class="copy-button bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm">
                                    ã‚³ãƒ”ãƒ¼
                                </button>
                            </div>
                            <pre class="bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto text-xs"><code>ssh -i ~/.ssh/github_actions_deploy ubuntu@your-ec2-ip</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³3: ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä½œæˆ -->
            <section class="mb-12 bg-white rounded-lg shadow-md p-8">
                <h2 class="text-3xl font-bold mb-6 text-blue-600">ğŸ“ Step 2: ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä½œæˆ</h2>

                <div class="prose max-w-none">
                    <p class="mb-4">EC2ä¸Šã§å®Ÿè¡Œã™ã‚‹ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚</p>

                    <h3 class="text-xl font-bold mb-3">1. ãƒªãƒã‚¸ãƒˆãƒªã«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’è¿½åŠ </h3>
                    <p class="mb-4">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã« <code>deploy.sh</code> ã‚’ä½œæˆã—ã¾ã™ã€‚</p>

                    <div class="code-block-wrapper relative mb-6">
                        <div class="absolute top-2 right-2">
                            <button class="copy-button bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm">
                                ã‚³ãƒ”ãƒ¼
                            </button>
                        </div>
                        <pre class="bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto"><code>#!/bin/bash
set -e

echo "ğŸš€ Starting deployment..."

# ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•
cd /var/www/your-app

# ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãƒ¢ãƒ¼ãƒ‰ã‚’æœ‰åŠ¹åŒ–
php artisan down || true

# æœ€æ–°ã‚³ãƒ¼ãƒ‰ã‚’å–å¾—
echo "ğŸ“¥ Pulling latest code..."
git fetch origin main
git reset --hard origin/main

# ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
echo "ğŸ“¦ Installing dependencies..."
composer install --no-interaction --prefer-dist --optimize-autoloader --no-dev

# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã¨ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
echo "ğŸ”§ Running migrations and clearing cache..."
php artisan migrate --force
php artisan config:cache
php artisan route:cache
php artisan view:cache

# ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³
echo "ğŸ”’ Setting permissions..."
chown -R www-data:www-data storage bootstrap/cache
chmod -R 775 storage bootstrap/cache

# ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãƒ¢ãƒ¼ãƒ‰ã‚’è§£é™¤
php artisan up

echo "âœ… Deployment completed successfully!"</code></pre>
                    </div>

                    <h3 class="text-xl font-bold mb-3 mt-6">2. ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’EC2ã«é…ç½®</h3>
                    <p class="mb-4">EC2ä¸Šã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«é…ç½®ã—ã€å®Ÿè¡Œæ¨©é™ã‚’ä»˜ä¸ã—ã¾ã™ã€‚</p>

                    <div class="code-block-wrapper relative mb-6">
                        <div class="absolute top-2 right-2">
                            <button class="copy-button bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm">
                                ã‚³ãƒ”ãƒ¼
                            </button>
                        </div>
                        <pre class="bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto"><code># EC2ã«SSHæ¥ç¶šå¾Œ
cd /var/www/your-app
chmod +x deploy.sh</code></pre>
                    </div>

                    <div class="bg-yellow-50 border-l-4 border-yellow-600 p-4 mb-6">
                        <h4 class="font-bold mb-2">ğŸ’¡ ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®è§£èª¬</h4>
                        <ul class="list-disc ml-6 text-sm space-y-1">
                            <li><code>php artisan down</code> - ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãƒ¢ãƒ¼ãƒ‰ã§ä¸€æ™‚çš„ã«ã‚¢ã‚¯ã‚»ã‚¹ã‚’é®æ–­</li>
                            <li><code>git reset --hard</code> - æœ€æ–°ã‚³ãƒ¼ãƒ‰ã‚’å¼·åˆ¶çš„ã«å–å¾—</li>
                            <li><code>composer install --no-dev</code> - æœ¬ç•ªç’°å¢ƒç”¨ã®ä¾å­˜é–¢ä¿‚ã®ã¿ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</li>
                            <li><code>php artisan migrate --force</code> - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ</li>
                            <li><code>*:cache</code> - å„ç¨®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’å†ç”Ÿæˆã—ã¦ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³4: GitHub Actionsãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®ä½œæˆ -->
            <section class="mb-12 bg-white rounded-lg shadow-md p-8">
                <h2 class="text-3xl font-bold mb-6 text-blue-600">âš™ï¸ Step 3: GitHub Actionsãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®ä½œæˆ</h2>

                <div class="prose max-w-none">
                    <p class="mb-4">
                        <code>.github/workflows/deploy.yml</code> ã‚’ä½œæˆã—ã¾ã™ã€‚
                    </p>

                    <div class="code-block-wrapper relative mb-6">
                        <div class="absolute top-2 right-2">
                            <button class="copy-button bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm">
                                ã‚³ãƒ”ãƒ¼
                            </button>
                        </div>
                        <pre class="bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto"><code>name: Deploy to EC2

on:
  push:
    branches: [ main ]
  workflow_dispatch:  # æ‰‹å‹•å®Ÿè¡Œã‚’è¨±å¯

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout code
      uses: actions/checkout@v3

    - name: Setup PHP
      uses: shivammathur/setup-php@v2
      with:
        php-version: '8.2'
        extensions: mbstring, xml, ctype, json, bcmath

    - name: Install dependencies
      run: composer install --prefer-dist --no-progress

    - name: Run PHPStan
      run: ./vendor/bin/phpstan analyse

    - name: Run PHP CS Fixer
      run: ./vendor/bin/php-cs-fixer fix --dry-run --diff

    - name: Run tests
      run: |
        cp .env.example .env
        php artisan key:generate
        php artisan test

  deploy:
    needs: test
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'

    steps:
    - name: Deploy to EC2
      uses: appleboy/ssh-action@master
      with:
        host: ${{ secrets.EC2_HOST }}
        username: ${{ secrets.EC2_USERNAME }}
        key: ${{ secrets.EC2_SSH_KEY }}
        script: |
          cd /var/www/your-app
          ./deploy.sh

    - name: Notify deployment status
      if: always()
      run: |
        if [ ${{ job.status }} == 'success' ]; then
          echo "âœ… Deployment succeeded!"
        else
          echo "âŒ Deployment failed!"
        fi</code></pre>
                    </div>

                    <div class="bg-blue-50 border-l-4 border-blue-600 p-4 mb-6">
                        <h4 class="font-bold mb-2">ğŸ” ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®è§£èª¬</h4>
                        <ul class="list-disc ml-6 text-sm space-y-2">
                            <li><strong>testã‚¸ãƒ§ãƒ–</strong>ï¼šãƒ†ã‚¹ãƒˆã¨å“è³ªãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œ</li>
                            <li><strong>deployã‚¸ãƒ§ãƒ–</strong>ï¼štestãŒæˆåŠŸã—ãŸå ´åˆã®ã¿å®Ÿè¡Œã•ã‚Œã‚‹</li>
                            <li><strong>needs: test</strong>ï¼štestã‚¸ãƒ§ãƒ–ãŒæˆåŠŸã—ãªã„ã¨deployã¯å®Ÿè¡Œã•ã‚Œãªã„</li>
                            <li><strong>appleboy/ssh-action</strong>ï¼šSSHçµŒç”±ã§EC2ã«ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œ</li>
                            <li><strong>workflow_dispatch</strong>ï¼šGitHub UIã‹ã‚‰æ‰‹å‹•å®Ÿè¡Œå¯èƒ½</li>
                        </ul>
                    </div>

                    <div class="bg-green-50 border-l-4 border-green-600 p-4 mb-6">
                        <h4 class="font-bold mb-2">âœ¨ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹</h4>
                        <ul class="list-disc ml-6 text-sm space-y-1">
                            <li>ç§˜å¯†éµã¯çµ¶å¯¾ã«GitHubã«ã‚³ãƒŸãƒƒãƒˆã—ãªã„</li>
                            <li>GitHub Secretsã‚’ä½¿ã£ã¦æ©Ÿå¯†æƒ…å ±ã‚’ç®¡ç†</li>
                            <li>ãƒ‡ãƒ—ãƒ­ã‚¤å°‚ç”¨ã®SSHã‚­ãƒ¼ã‚’ä½¿ç”¨ï¼ˆEC2ãƒ­ã‚°ã‚¤ãƒ³ç”¨ã¨åˆ†ã‘ã‚‹ï¼‰</li>
                            <li>mainãƒ–ãƒ©ãƒ³ãƒã®ã¿ãƒ‡ãƒ—ãƒ­ã‚¤å¯¾è±¡ã«ã™ã‚‹</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³5: å®Ÿè·µæ¼”ç¿’ -->
            <section class="mb-12 bg-white rounded-lg shadow-md p-8">
                <h2 class="text-3xl font-bold mb-6 text-blue-600">ğŸ¯ Step 4: ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’å®Ÿè¡Œã—ã¦ã¿ã‚ˆã†</h2>

                <div class="prose max-w-none">
                    <h3 class="text-xl font-bold mb-3">1. åˆå›ãƒ‡ãƒ—ãƒ­ã‚¤ã®æº–å‚™</h3>

                    <h4 class="font-bold mb-2 mt-4">EC2ã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åˆæœŸé…ç½®</h4>
                    <div class="code-block-wrapper relative mb-6">
                        <div class="absolute top-2 right-2">
                            <button class="copy-button bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm">
                                ã‚³ãƒ”ãƒ¼
                            </button>
                        </div>
                        <pre class="bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto"><code># EC2ä¸Šã§å®Ÿè¡Œ
cd /var/www
sudo git clone https://github.com/your-username/your-repo.git your-app
cd your-app
cp .env.example .env
php artisan key:generate

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®šã‚’ç·¨é›†
nano .env

# ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
php artisan migrate

# ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³è¨­å®š
sudo chown -R www-data:www-data storage bootstrap/cache
sudo chmod -R 775 storage bootstrap/cache</code></pre>
                    </div>

                    <h3 class="text-xl font-bold mb-3 mt-6">2. ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ—ãƒƒã‚·ãƒ¥</h3>
                    <div class="code-block-wrapper relative mb-6">
                        <div class="absolute top-2 right-2">
                            <button class="copy-button bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm">
                                ã‚³ãƒ”ãƒ¼
                            </button>
                        </div>
                        <pre class="bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto"><code>git add .github/workflows/deploy.yml deploy.sh
git commit -m "Add automated deployment workflow"
git push origin main</code></pre>
                    </div>

                    <h3 class="text-xl font-bold mb-3 mt-6">3. ãƒ‡ãƒ—ãƒ­ã‚¤çŠ¶æ³ã‚’ç¢ºèª</h3>
                    <p class="mb-4">GitHubã®ã€ŒActionsã€ã‚¿ãƒ–ã§ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®å®Ÿè¡ŒçŠ¶æ³ã‚’ç¢ºèªã§ãã¾ã™ã€‚</p>

                    <div class="bg-blue-50 border p-4 rounded-lg mb-6">
                        <p class="font-bold mb-2">ç¢ºèªãƒã‚¤ãƒ³ãƒˆï¼š</p>
                        <ul class="list-disc ml-6 text-sm space-y-1">
                            <li>âœ… testã‚¸ãƒ§ãƒ–ãŒã™ã¹ã¦æˆåŠŸã—ã¦ã„ã‚‹ã‹</li>
                            <li>âœ… deployã‚¸ãƒ§ãƒ–ãŒå®Ÿè¡Œã•ã‚ŒãŸã‹</li>
                            <li>âœ… SSHæ¥ç¶šãŒæˆåŠŸã—ãŸã‹</li>
                            <li>âœ… ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒã‚¨ãƒ©ãƒ¼ãªãå®Œäº†ã—ãŸã‹</li>
                        </ul>
                    </div>

                    <h3 class="text-xl font-bold mb-3 mt-6">4. æœ¬ç•ªç’°å¢ƒã§å‹•ä½œç¢ºèª</h3>
                    <p class="mb-4">ãƒ–ãƒ©ã‚¦ã‚¶ã§EC2ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒæ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚</p>

                    <div class="code-block-wrapper relative mb-6">
                        <div class="absolute top-2 right-2">
                            <button class="copy-button bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm">
                                ã‚³ãƒ”ãƒ¼
                            </button>
                        </div>
                        <pre class="bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto"><code>http://your-ec2-ip</code></pre>
                    </div>
                </div>
            </section>

            <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³6: ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚° -->
            <section class="mb-12 bg-white rounded-lg shadow-md p-8">
                <h2 class="text-3xl font-bold mb-6 text-blue-600">ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</h2>

                <div class="space-y-6">
                    <div class="border-l-4 border-red-600 pl-4">
                        <h3 class="font-bold text-lg mb-2">âŒ SSHæ¥ç¶šã‚¨ãƒ©ãƒ¼</h3>
                        <p class="text-sm mb-2"><strong>ç—‡çŠ¶ï¼š</strong> "Permission denied (publickey)" ã‚¨ãƒ©ãƒ¼</p>
                        <p class="text-sm mb-2"><strong>å¯¾å‡¦æ³•ï¼š</strong></p>
                        <ul class="list-disc ml-6 text-sm space-y-1">
                            <li>GitHub Secretsã® <code>EC2_SSH_KEY</code> ã«ç§˜å¯†éµå…¨ä½“ï¼ˆBEGINã€œENDå«ã‚€ï¼‰ãŒã‚³ãƒ”ãƒ¼ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª</li>
                            <li>EC2ã® <code>~/.ssh/authorized_keys</code> ã«å…¬é–‹éµãŒæ­£ã—ãè¿½åŠ ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª</li>
                            <li><code>EC2_USERNAME</code> ãŒæ­£ã—ã„ã‹ç¢ºèªï¼ˆubuntuã€ec2-userãªã©ï¼‰</li>
                        </ul>
                    </div>

                    <div class="border-l-4 border-red-600 pl-4">
                        <h3 class="font-bold text-lg mb-2">âŒ ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚¨ãƒ©ãƒ¼</h3>
                        <p class="text-sm mb-2"><strong>ç—‡çŠ¶ï¼š</strong> "Permission denied" ã‚„ "command not found"</p>
                        <p class="text-sm mb-2"><strong>å¯¾å‡¦æ³•ï¼š</strong></p>
                        <ul class="list-disc ml-6 text-sm space-y-1">
                            <li><code>deploy.sh</code> ã«å®Ÿè¡Œæ¨©é™ãŒã‚ã‚‹ã‹ç¢ºèªï¼š<code>chmod +x deploy.sh</code></li>
                            <li>EC2ã«PHPã€Composerã€GitãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª</li>
                            <li>ã‚¹ã‚¯ãƒªãƒ—ãƒˆå†…ã®ãƒ‘ã‚¹ï¼ˆ<code>/var/www/your-app</code>ï¼‰ãŒæ­£ã—ã„ã‹ç¢ºèª</li>
                        </ul>
                    </div>

                    <div class="border-l-4 border-red-600 pl-4">
                        <h3 class="font-bold text-lg mb-2">âŒ composer installã‚¨ãƒ©ãƒ¼</h3>
                        <p class="text-sm mb-2"><strong>ç—‡çŠ¶ï¼š</strong> ãƒ¡ãƒ¢ãƒªä¸è¶³ã‚¨ãƒ©ãƒ¼</p>
                        <p class="text-sm mb-2"><strong>å¯¾å‡¦æ³•ï¼š</strong></p>
                        <div class="code-block-wrapper relative mt-2">
                            <div class="absolute top-2 right-2">
                                <button class="copy-button bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm">
                                    ã‚³ãƒ”ãƒ¼
                                </button>
                            </div>
                            <pre class="bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto text-xs"><code># ã‚¹ãƒ¯ãƒƒãƒ—ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
sudo fallocate -l 2G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile</code></pre>
                        </div>
                    </div>

                    <div class="border-l-4 border-yellow-600 pl-4">
                        <h3 class="font-bold text-lg mb-2">ğŸ’¡ ãƒ‡ãƒãƒƒã‚°æ–¹æ³•</h3>
                        <p class="text-sm mb-2">EC2ä¸Šã§ãƒ­ã‚°ã‚’ç¢ºèªï¼š</p>
                        <div class="code-block-wrapper relative mt-2">
                            <div class="absolute top-2 right-2">
                                <button class="copy-button bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm">
                                    ã‚³ãƒ”ãƒ¼
                                </button>
                            </div>
                            <pre class="bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto text-xs"><code># Laravelãƒ­ã‚°
tail -f /var/www/your-app/storage/logs/laravel.log

# Nginxã‚¨ãƒ©ãƒ¼ãƒ­ã‚°
sudo tail -f /var/log/nginx/error.log</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³7: ç™ºå±•çš„ãªãƒˆãƒ”ãƒƒã‚¯ -->
            <section class="mb-12 bg-white rounded-lg shadow-md p-8">
                <h2 class="text-3xl font-bold mb-6 text-blue-600">ğŸš€ ç™ºå±•çš„ãªãƒˆãƒ”ãƒƒã‚¯</h2>

                <div class="space-y-6">
                    <div class="border-l-4 border-blue-600 pl-4">
                        <h3 class="font-bold text-lg mb-2">1. ãƒ–ãƒ«ãƒ¼ã‚°ãƒªãƒ¼ãƒ³ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ</h3>
                        <p class="text-sm">2ã¤ã®æœ¬ç•ªç’°å¢ƒã‚’ç”¨æ„ã—ã€åˆ‡ã‚Šæ›¿ãˆã‚‹ã“ã¨ã§ã‚¼ãƒ­ãƒ€ã‚¦ãƒ³ã‚¿ã‚¤ãƒ ã‚’å®Ÿç¾ã—ã¾ã™ã€‚</p>
                    </div>

                    <div class="border-l-4 border-blue-600 pl-4">
                        <h3 class="font-bold text-lg mb-2">2. ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½</h3>
                        <p class="text-sm">ãƒ‡ãƒ—ãƒ­ã‚¤ã«å¤±æ•—ã—ãŸå ´åˆã€è‡ªå‹•çš„ã«å‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«æˆ»ã™ä»•çµ„ã¿ã‚’è¿½åŠ ã§ãã¾ã™ã€‚</p>
                        <div class="code-block-wrapper relative mt-2">
                            <div class="absolute top-2 right-2">
                                <button class="copy-button bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm">
                                    ã‚³ãƒ”ãƒ¼
                                </button>
                            </div>
                            <pre class="bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto text-xs"><code># deploy.shã«è¿½åŠ 
if ! ./deploy.sh; then
  echo "Deployment failed, rolling back..."
  git reset --hard HEAD@{1}
  composer install
  php artisan up
fi</code></pre>
                        </div>
                    </div>

                    <div class="border-l-4 border-blue-600 pl-4">
                        <h3 class="font-bold text-lg mb-2">3. Slack/Discordé€šçŸ¥</h3>
                        <p class="text-sm">ãƒ‡ãƒ—ãƒ­ã‚¤ã®æˆåŠŸãƒ»å¤±æ•—ã‚’ãƒãƒ£ãƒƒãƒˆãƒ„ãƒ¼ãƒ«ã«é€šçŸ¥ã§ãã¾ã™ã€‚</p>
                    </div>

                    <div class="border-l-4 border-blue-600 pl-4">
                        <h3 class="font-bold text-lg mb-2">4. ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒ</h3>
                        <p class="text-sm">æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤å‰ã«ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒã§å‹•ä½œç¢ºèªã™ã‚‹ç’°å¢ƒã‚’è¿½åŠ ã§ãã¾ã™ã€‚</p>
                    </div>

                    <div class="border-l-4 border-blue-600 pl-4">
                        <h3 class="font-bold text-lg mb-2">5. DockeråŒ–</h3>
                        <p class="text-sm">ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’Dockerã‚³ãƒ³ãƒ†ãƒŠåŒ–ã™ã‚‹ã“ã¨ã§ã€ç’°å¢ƒã®å†ç¾æ€§ãŒå‘ä¸Šã—ã¾ã™ã€‚</p>
                    </div>
                </div>
            </section>

            <!-- ã¾ã¨ã‚ -->
            <section class="mb-12">
                <div class="bg-gradient-to-br from-blue-50 via-indigo-50 to-blue-100 p-8 rounded-lg shadow-lg">
                    <h2 class="text-3xl font-bold mb-6 text-gray-800">ğŸ“ å®Ÿè·µç·¨ã®ã¾ã¨ã‚</h2>
                    <div class="space-y-6">
                        <div class="bg-white p-6 rounded-lg shadow">
                            <h3 class="text-xl font-bold text-gray-800 mb-4">å­¦ã‚“ã ã“ã¨</h3>
                            <ul class="space-y-2 text-gray-700">
                                <li>âœ… GitHub Actionsã‹ã‚‰EC2ã¸ã®å®‰å…¨ãªãƒ‡ãƒ—ãƒ­ã‚¤</li>
                                <li>âœ… SSHã‚­ãƒ¼ã¨GitHub Secretsã®æ´»ç”¨</li>
                                <li>âœ… ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä½œæˆ</li>
                                <li>âœ… è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®æ§‹ç¯‰</li>
                            </ul>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow">
                            <h3 class="text-xl font-bold text-gray-800 mb-4">ğŸ’ª å®Ÿå‹™ã§æ´»ã‹ã™ãŸã‚ã«</h3>
                            <p class="text-gray-700">
                                ã“ã®è¬›åº§ã§å­¦ã‚“ã CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¯ã€å®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã™ãã«æ´»ç”¨ã§ãã¾ã™ã€‚
                                å°ã•ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰å§‹ã‚ã¦ã€å¾ã€…ã«è¤‡é›‘ãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã«æŒ‘æˆ¦ã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚
                            </p>
                        </div>
                    </div>
                </div>
            </section>

        </div>

        <!-- æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ— -->
        <section class="py-16 bg-white">
            <div class="container mx-auto px-6">
                <div class="max-w-4xl mx-auto">
                    <div class="text-center">
                        <h3 class="text-2xl font-bold text-gray-800 mb-6">ğŸ‰ è¬›åº§å®Œäº†</h3>
                        <p class="text-gray-600 mb-8 text-lg">
                            CI/CDå®Ÿè·µè¬›åº§ã‚’å®Œèµ°ã—ã¾ã—ãŸï¼<br>
                            å­¦ã‚“ã çŸ¥è­˜ã‚’å®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§æ´»ã‹ã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚
                        </p>

                        <a href="cicd-index.html" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-full inline-block transition text-lg">
                            ç†è«–ç·¨ã«æˆ»ã‚‹
                        </a>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
    <footer class="bg-gradient-to-r from-gray-800 to-gray-900 text-white py-12 mt-16">
        <div class="container mx-auto px-4">
            <div class="text-center">
                <p class="text-gray-300 text-sm">
                    &copy; <span id="currentYear"></span> ã‚¢ã‚¸ãƒ£ã‚¤ãƒ« ãƒ“ã‚¸ãƒã‚¹ ã‚¤ãƒ³ã‚¹ãƒ†ã‚£ãƒ†ãƒ¥ãƒ¼ãƒˆæ ªå¼ä¼šç¤¾
                </p>
            </div>
        </div>
    </footer>

    <script>
        // ç¾åœ¨ã®å¹´ã‚’è‡ªå‹•æŒ¿å…¥
        document.getElementById('currentYear').textContent = new Date().getFullYear();
    </script>

    <!-- ä¸Šéƒ¨ã¸æˆ»ã‚‹ãƒœã‚¿ãƒ³ -->
    <button id="scrollToTop" class="hidden fixed bottom-8 right-8 bg-blue-600 hover:bg-blue-700 text-white p-4 rounded-full shadow-lg transition-all duration-300 z-50">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"></path>
        </svg>
    </button>

    <script src="script.js"></script>
    <script src="code-copy.js"></script>
    <script src="global-menu.js"></script>
    <script src="nav-highlight.js"></script>
    <script src="scroll-to-top.js"></script>
</body>
</html>
